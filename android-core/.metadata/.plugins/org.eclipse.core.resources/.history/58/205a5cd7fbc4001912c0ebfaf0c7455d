package anups.uvw.util;

public class LogcatHelper {
  private static LogcatHelper INSTANCE = null;
  private static String PATH_LOGCAT;
  private LogDumper mLogDumper = null;
  private int mPId;

  /**
   * init data
   */
  public void init(Context context) {
      if (Environment.getExternalStorageState().equals(
              Environment.MEDIA_MOUNTED)) {// sd first
          PATH_LOGCAT = Environment.getExternalStorageDirectory()
                  .getAbsolutePath() + File.separator + "logcat";
      } else {
          PATH_LOGCAT = context.getFilesDir().getAbsolutePath()
                  + File.separator + "logcat";
      }
      File file = new File(PATH_LOGCAT);
      if (!file.exists()) {
          file.mkdirs();
      }
  }

  public static LogcatHelper getInstance(Context context) {
	    if (INSTANCE == null) {
	        INSTANCE = new LogcatHelper(context);
	    }
	    return INSTANCE;
	}

	private LogcatHelper(Context context) {
	    init(context);
	    mPId = android.os.Process.myPid();
	}
	
	public void start() {
	    if (mLogDumper == null)
	        mLogDumper = new LogDumper(String.valueOf(mPId), PATH_LOGCAT);
	    mLogDumper.start();
	}

	public void stop() {
	    if (mLogDumper != null) {
	        mLogDumper.stopLogs();
	        mLogDumper = null;
	    }
	}
	
	
}
